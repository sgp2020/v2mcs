<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.muratec.mcs.mapper.McsMapper">
  <resultMap id="BaseResultMap" type="net.muratec.mcs.model.Mcs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="MCS_NAME" jdbcType="VARCHAR" property="mcsName" />
    <result column="SYSTEM_STATE" jdbcType="DECIMAL" property="systemState" />
    <result column="MCS_VERSION" jdbcType="VARCHAR" property="mcsVersion" />
    <result column="GUI_VERSION" jdbcType="VARCHAR" property="guiVersion" />
    <result column="AVAILABILITY" jdbcType="DECIMAL" property="availability" />
    <result column="MCS_L_STATE" jdbcType="DECIMAL" property="mcsLState" />
    <result column="MCS_L_STATE_SET_TIME" jdbcType="OTHER" property="mcsLStateSetTime" />
    <result column="MCS_L_STATE_SET_AUTHOR" jdbcType="VARCHAR" property="mcsLStateSetAuthor" />
    <result column="TABLE_NO" jdbcType="DECIMAL" property="tableNo" />
    <result column="ROUTE_STATE" jdbcType="DECIMAL" property="routeState" />
    <result column="REPRESENTATIVE_IP" jdbcType="VARCHAR" property="representativeIp" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    MCS_NAME, SYSTEM_STATE, MCS_VERSION, GUI_VERSION, AVAILABILITY, MCS_L_STATE, MCS_L_STATE_SET_TIME, 
    MCS_L_STATE_SET_AUTHOR, TABLE_NO, ROUTE_STATE, REPRESENTATIVE_IP
  </sql>
  <select id="selectByExample" parameterType="net.muratec.mcs.model.McsExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from MCS
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from MCS
    where MCS_NAME = #{mcsName,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from MCS
    where MCS_NAME = #{mcsName,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="net.muratec.mcs.model.McsExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from MCS
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="net.muratec.mcs.model.Mcs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into MCS (MCS_NAME, SYSTEM_STATE, MCS_VERSION, 
      GUI_VERSION, AVAILABILITY, MCS_L_STATE, 
      MCS_L_STATE_SET_TIME, MCS_L_STATE_SET_AUTHOR, TABLE_NO, 
      ROUTE_STATE, REPRESENTATIVE_IP)
    values (#{mcsName,jdbcType=VARCHAR}, #{systemState,jdbcType=DECIMAL}, #{mcsVersion,jdbcType=VARCHAR}, 
      #{guiVersion,jdbcType=VARCHAR}, #{availability,jdbcType=DECIMAL}, #{mcsLState,jdbcType=DECIMAL}, 
      #{mcsLStateSetTime,jdbcType=OTHER}, #{mcsLStateSetAuthor,jdbcType=VARCHAR}, #{tableNo,jdbcType=DECIMAL}, 
      #{routeState,jdbcType=DECIMAL}, #{representativeIp,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="net.muratec.mcs.model.Mcs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into MCS
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="mcsName != null">
        MCS_NAME,
      </if>
      <if test="systemState != null">
        SYSTEM_STATE,
      </if>
      <if test="mcsVersion != null">
        MCS_VERSION,
      </if>
      <if test="guiVersion != null">
        GUI_VERSION,
      </if>
      <if test="availability != null">
        AVAILABILITY,
      </if>
      <if test="mcsLState != null">
        MCS_L_STATE,
      </if>
      <if test="mcsLStateSetTime != null">
        MCS_L_STATE_SET_TIME,
      </if>
      <if test="mcsLStateSetAuthor != null">
        MCS_L_STATE_SET_AUTHOR,
      </if>
      <if test="tableNo != null">
        TABLE_NO,
      </if>
      <if test="routeState != null">
        ROUTE_STATE,
      </if>
      <if test="representativeIp != null">
        REPRESENTATIVE_IP,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="mcsName != null">
        #{mcsName,jdbcType=VARCHAR},
      </if>
      <if test="systemState != null">
        #{systemState,jdbcType=DECIMAL},
      </if>
      <if test="mcsVersion != null">
        #{mcsVersion,jdbcType=VARCHAR},
      </if>
      <if test="guiVersion != null">
        #{guiVersion,jdbcType=VARCHAR},
      </if>
      <if test="availability != null">
        #{availability,jdbcType=DECIMAL},
      </if>
      <if test="mcsLState != null">
        #{mcsLState,jdbcType=DECIMAL},
      </if>
      <if test="mcsLStateSetTime != null">
        #{mcsLStateSetTime,jdbcType=OTHER},
      </if>
      <if test="mcsLStateSetAuthor != null">
        #{mcsLStateSetAuthor,jdbcType=VARCHAR},
      </if>
      <if test="tableNo != null">
        #{tableNo,jdbcType=DECIMAL},
      </if>
      <if test="routeState != null">
        #{routeState,jdbcType=DECIMAL},
      </if>
      <if test="representativeIp != null">
        #{representativeIp,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="net.muratec.mcs.model.McsExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select count(*) from MCS
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update MCS
    <set>
      <if test="record.mcsName != null">
        MCS_NAME = #{record.mcsName,jdbcType=VARCHAR},
      </if>
      <if test="record.systemState != null">
        SYSTEM_STATE = #{record.systemState,jdbcType=DECIMAL},
      </if>
      <if test="record.mcsVersion != null">
        MCS_VERSION = #{record.mcsVersion,jdbcType=VARCHAR},
      </if>
      <if test="record.guiVersion != null">
        GUI_VERSION = #{record.guiVersion,jdbcType=VARCHAR},
      </if>
      <if test="record.availability != null">
        AVAILABILITY = #{record.availability,jdbcType=DECIMAL},
      </if>
      <if test="record.mcsLState != null">
        MCS_L_STATE = #{record.mcsLState,jdbcType=DECIMAL},
      </if>
      <if test="record.mcsLStateSetTime != null">
        MCS_L_STATE_SET_TIME = #{record.mcsLStateSetTime,jdbcType=OTHER},
      </if>
      <if test="record.mcsLStateSetAuthor != null">
        MCS_L_STATE_SET_AUTHOR = #{record.mcsLStateSetAuthor,jdbcType=VARCHAR},
      </if>
      <if test="record.tableNo != null">
        TABLE_NO = #{record.tableNo,jdbcType=DECIMAL},
      </if>
      <if test="record.routeState != null">
        ROUTE_STATE = #{record.routeState,jdbcType=DECIMAL},
      </if>
      <if test="record.representativeIp != null">
        REPRESENTATIVE_IP = #{record.representativeIp,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update MCS
    set MCS_NAME = #{record.mcsName,jdbcType=VARCHAR},
      SYSTEM_STATE = #{record.systemState,jdbcType=DECIMAL},
      MCS_VERSION = #{record.mcsVersion,jdbcType=VARCHAR},
      GUI_VERSION = #{record.guiVersion,jdbcType=VARCHAR},
      AVAILABILITY = #{record.availability,jdbcType=DECIMAL},
      MCS_L_STATE = #{record.mcsLState,jdbcType=DECIMAL},
      MCS_L_STATE_SET_TIME = #{record.mcsLStateSetTime,jdbcType=OTHER},
      MCS_L_STATE_SET_AUTHOR = #{record.mcsLStateSetAuthor,jdbcType=VARCHAR},
      TABLE_NO = #{record.tableNo,jdbcType=DECIMAL},
      ROUTE_STATE = #{record.routeState,jdbcType=DECIMAL},
      REPRESENTATIVE_IP = #{record.representativeIp,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="net.muratec.mcs.model.Mcs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update MCS
    <set>
      <if test="systemState != null">
        SYSTEM_STATE = #{systemState,jdbcType=DECIMAL},
      </if>
      <if test="mcsVersion != null">
        MCS_VERSION = #{mcsVersion,jdbcType=VARCHAR},
      </if>
      <if test="guiVersion != null">
        GUI_VERSION = #{guiVersion,jdbcType=VARCHAR},
      </if>
      <if test="availability != null">
        AVAILABILITY = #{availability,jdbcType=DECIMAL},
      </if>
      <if test="mcsLState != null">
        MCS_L_STATE = #{mcsLState,jdbcType=DECIMAL},
      </if>
      <if test="mcsLStateSetTime != null">
        MCS_L_STATE_SET_TIME = #{mcsLStateSetTime,jdbcType=OTHER},
      </if>
      <if test="mcsLStateSetAuthor != null">
        MCS_L_STATE_SET_AUTHOR = #{mcsLStateSetAuthor,jdbcType=VARCHAR},
      </if>
      <if test="tableNo != null">
        TABLE_NO = #{tableNo,jdbcType=DECIMAL},
      </if>
      <if test="routeState != null">
        ROUTE_STATE = #{routeState,jdbcType=DECIMAL},
      </if>
      <if test="representativeIp != null">
        REPRESENTATIVE_IP = #{representativeIp,jdbcType=VARCHAR},
      </if>
    </set>
    where MCS_NAME = #{mcsName,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="net.muratec.mcs.model.Mcs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update MCS
    set SYSTEM_STATE = #{systemState,jdbcType=DECIMAL},
      MCS_VERSION = #{mcsVersion,jdbcType=VARCHAR},
      GUI_VERSION = #{guiVersion,jdbcType=VARCHAR},
      AVAILABILITY = #{availability,jdbcType=DECIMAL},
      MCS_L_STATE = #{mcsLState,jdbcType=DECIMAL},
      MCS_L_STATE_SET_TIME = #{mcsLStateSetTime,jdbcType=OTHER},
      MCS_L_STATE_SET_AUTHOR = #{mcsLStateSetAuthor,jdbcType=VARCHAR},
      TABLE_NO = #{tableNo,jdbcType=DECIMAL},
      ROUTE_STATE = #{routeState,jdbcType=DECIMAL},
      REPRESENTATIVE_IP = #{representativeIp,jdbcType=VARCHAR}
    where MCS_NAME = #{mcsName,jdbcType=VARCHAR}
  </update>

  <!-- ここより、独自SQLを記載する -->

  <!-- ステータスを取得 -->
  <select id="selectState" resultType="net.muratec.mcs.model.McsState">
    select
      MCS_VERSION,
      GUI_VERSION,
      (select STRING from STRING_MASTER where KEY = 'MCS_STATE_STRING' and CODE = M.SYSTEM_STATE) as SYSTEM_STATE,
      case
        when exists(select * from HOST_STATE where COMM_STATE = 1)
          then (select STRING from STRING_MASTER where KEY='COMMUNICATION_STATE_STRING' and CODE = 1)
        else
          (select STRING from STRING_MASTER where KEY='COMMUNICATION_STATE_STRING' and CODE = 0)
      end as COMM_STATE
    from
      MCS M
  </select>

  <select id="selectLState" parameterType="java.lang.String" resultType="java.lang.String">
    select
      STRING
    from
      STRING_MASTER
    where
      KEY = 'MCS_LOGICAL_STATE_STRING'
    and
      CODE = (select
               MCS_L_STATE
              from
                MCS
              where
                MCS_NAME = #{mcsName,jdbcType=VARCHAR}
              )
  </select>

</mapper>
